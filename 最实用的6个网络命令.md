# 最实用的6个网络命令

很多弱电工程师朋友在项目中经常遇到一些网络故障，需要通过一些一些命令去检测、定位故障点，通过使用网络命令，故障解决的工作取得了事半功倍的效果。下面就一起温故而知新吧！



**一、ping命令（因特网包探索器）**

ping是个使用频率极高的实用程序，主要用于确定网络的连通性。这对确定网络是否正确连接，以及网络连接的状况十分有用。简单的说，ping就是一个测试程序，如果ping运行正确，大体上就可以排除网络访问层、网卡、Modem的输入输出线路、电缆和路由器等存在的故障，从而缩小问题的范围。

**1、ping命令的基本应用**

一般情况下，用户可以通过使用一系列ping命令来查找问题出在什么地方，或检验网络运行的情况。下面就给出一个典型的检测次序及对应的可能故障：



![img](https://pic2.zhimg.com/80/v2-9e0a958ff0bb492a7f2ab59f4f094241_720w.webp)



windows 7系统下ping 百度网址案例



**注：**后面的 时间=25ms 是响应时间，这个时间越小，说明你连接这个地址速度越快。

① ping 127.0.0.1

如果测试成功，表明网卡、TCP/IP协议的安装、IP地址、子网掩码的设置正常。如果测试不成功，就表示TCP/IP的安装或设置存在有问题。



② ping 本机IP地址

如果测试不成功，则表示本地配置或安装存在问题，应当对网络设备和通讯介质进行测试、检查并排除。



③ ping局域网内其他IP

如果测试成功，表明本地网络中的网卡和载体运行正确。但如果收到0个回送应答，那么表示子网掩码不正确或网卡配置错误或电缆系统有问题。



④ ping 网关IP

这个命令如果应答正确，表示局域网中的网关路由器正在运行并能够做出应答。



⑤ ping 远程IP

如果收到正确应答，表示成功的使用了缺省网关。对于拨号上网用户则表示能够成功的访问Internet（但不排除ISP的DNS会有问题）。



## **2、ping 命令参数**

在DOS窗口中，输入ping /?（注意，ping后面有一个空格，不可省略），或者直接输入ping加一个空格。敲击回车键，会显示出ping命令的帮助说明。



![img](https://pic3.zhimg.com/80/v2-ef263994445c50cbd6290ff446451992_720w.webp)



ping命令参数



**3、实例：测试目标并进行名字解析。**

C:>ping –a 目标IP地址



![img](https://pic2.zhimg.com/80/v2-05b9ff26c67bf4834199c3f7e1f10eb1_720w.webp)



**二、ipconfig(显示ip配置值）**

IPConfig可用于显示当前的TCP/IP配置的设置值。

简单来说，ipconfig这个命令让我们可以快速的获得计算机当前的IP地址、子网掩码和缺省网关等信息，这些信息都是进行测试和故障分析的必要项目。同时，此命令也可以清空DNS缓存（DNS cache）。

## 1、ipconfig 命令参数



![img](https://pic1.zhimg.com/80/v2-3594882cff1ef2f37296efdb2ec8ef1c_720w.webp)



ipconfig命令参数

一般用的最多的就是输入：ipconfig/all，会显示完整的配置信息。例如：



![img](https://pic4.zhimg.com/80/v2-a61a310e3e6f96dd6bfc866431aec1d3_720w.webp)





**三、arp命令（地址转换协议）**

ARP是TCP/IP协议族中的一个重要协议，用于确定对应IP地址的网卡物理地址。



使用arp命令，能够查看本地计算机或另一台计算机的ARP高速缓存中的当前内容。此外，使用arp命令可以人工方式设置静态的网卡物理地址/IP地址对，使用这种方式可以为缺省网关和本地服务器等常用主机进行本地静态配置，这有助于减少网络上的信息量。



按照缺省设置，ARP高速缓存中的项目是动态的，每当向指定地点发送数据并且此时高速缓存中不存在当前项目时，ARP便会自动添加该项目。

**常用命令选项：**

① arp –a：用于查看高速缓存中的所有项目。



![img](https://pic1.zhimg.com/80/v2-b7c8362349d790b496ed0e8a56d1bdec_720w.webp)



② arp -a IP：如果有多个网卡，那么使用arp -a加上接口的IP地址，就可以只显示与该接口相关的ARP缓存项目。



③ arp -s IP 物理地址：向ARP高速缓存中人工输入一个静态项目。该项目在计算机引导过程中将保持有效状态，或者在出现错误时，人工配置的物理地址将自动更新该项目。



④ arp -d IP：使用本命令能够人工删除一个静态项目。



**四、traceroute命令**

掌握使用traceroute命令测量路由情况的技能，即用来显示数据包到达目的主机所经过的路径。

traceroute命令的基本用法是，在命令提示符后键入“tracert host_name”或“tracert ip_address”，其中，tracert是traceroute在Windows操作系统上的称呼。



![img](https://pic2.zhimg.com/80/v2-94844772c7e2f2c8c05d30993f4e18d5_720w.webp)



**输出有5列：**

第一列是描述路径的第n跳的数值，即沿着该路径的路由器序号；

第二列是第一次往返时延；

第三列是第二次往返时延；

第四列是第三次往返时延；

第五列是路由器的名字及其输入端口的IP地址。



如果源从任何给定的路由器接收到的报文少于3条（由于网络中的分组丢失），traceroute在该路由器号码后面放一个星号，并报告到达那台路由器的少于3次的往返时间。



此外，tracert命令还可以用来查看网络在连接站点时经过的步骤或采取哪种路线，如果是网络出现故障，就可以通过这条命令查看出现问题的位置。

**【如何测试大型网络的路由】：**

（1）多尝试几次“ping www.sina.com.cn”操作，比较得到的新浪网的IP地址。如果两次ping得到的IP地址不同，试考虑其中的原因（如考虑到负载均衡）。然后，针对这些不同的IP地址，执行“tracert ip_address”命令，观察分析输出的结果是否有差异。

（2）对于大型网络中的某站点进行traceroute测试，记录测试结果。观察其中是否出现第n跳的时延小于第n-1跳的时延情况。试分析其中原因（提示：可分别考虑时延的各个构成成分在总时延中所起的作用）。

（3）在一天的不同时段内，用traceroute程序多次测试从固定主机到远程固定IP地址的主机的路由。试分析比较测量数据，观察该路由是否有变化？如果有变化，该变化频繁吗？



**五、route命令**

但是，当网络上拥有两个或多个路由器时，用户就不一定想只依赖缺省网关了。实际上可能想让某些远程IP地址通过某个特定的路由器来传递，而其他的远程IP则通过另一个路由器来传递。在这种情况下，用户需要相应的路由信息，这些信息储存在路由表中，每个主机和每个路由器都配有自己独一无二的路由表。大多数路由器使用专门的路由协议来交换和动态更新路由器之间的路由表。但在有些情况下，必须人工将项目添加到路由器和主机上的路由表中。route命令就是用来显示、人工添加和修改路由表项目的。该命令可使用如下选项：



**1、route print：**本命令用于显示路由表中的当前项目，在单个路由器网段上的输出结果如图所示。



**2、route add：**使用本命令，可以将路由项目添加给路由表。

例如，如果要设定一个到目的网络209.99.32.33的路由，其间要经过5个路由器网段，首先要经过本地网络上的一个路由器IP为202.96.123.5，子网掩码为255.255.255.224，那么用户应该输入以下命令：

route add 209.99.32.33 mask 255.255.255.224202.96.123.5 metric 5



**3、route change：**可以使用本命令来修改数据的传输路由，不过，用户不能使用本命令来改变数据的目的地。下面这个例子将上例路由改变采用一条包含3个网段的路径：

route add 209.99.32.33 mask 255.255.255.224202.96.123.250 metric 3



**4、route delete** 使用本命令可以从路由表中删除路由。例如：route delete 209.99.32.33



**六、释放ip/重新获取ip命令**

如果使用的计算机的操作系统是windows，当我们网络连不上时或者ip地址出现冲突时，可以使用先释放ip地址，然后再重新获取新的ip地址，就可以解决ip地址冲突问题。



**命令：**

ipconfig /release 释放IP地址。

然后还需要ipconfig /renew在重新获取一下。



**我们来看下它们的如何解决：**

**1、先释放网络ip地址ipconfig /release**



![img](https://pic2.zhimg.com/80/v2-ef5c1bd8b7f48d69df0d741c116b4115_720w.webp)



这时网络会断开，没有分配ip地址，因为ip地址已释放出来了。



**2、重新获取ip地址，ipconfig /renew**，



![img](https://pic2.zhimg.com/80/v2-105942d32f9024c9d00853e7623c0bc9_720w.webp)



这时网络会重新连接，但ip地址已经与原来不一样了，重新分配到了可用的ip地址连接网络了。



这些命令都是平时用的较多的，熟练的例用它，能够解决大部分弱电中的网络问题，网络故障不求人。